(this["webpackJsonproutr-ui"]=this["webpackJsonproutr-ui"]||[]).push([[0],{147:function(e,t,a){e.exports=a(581)},153:function(e,t,a){},154:function(e,t,a){},581:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(11),l=a.n(o),s=a(7),c=(a(153),a(14)),i=a(15),u=a(17),d=a(16),m=a(18),p=(a(154),a(155),a(654)),h=a(617),g=a(621),b=a(622),f=a(109),S=a.n(f),v=a(625),E=a(127),y=a(4),C=function(e){function t(){var e,a;Object(c.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(n)))).state={auth:!0,anchorEl:null},a.handleChange=function(e,t){a.setState({auth:t})},a.handleMenu=function(e){a.setState({anchorEl:e.currentTarget})},a.handleClose=function(){a.setState({anchorEl:null})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,r=t.appStore,o=this.state,l=o.auth,s=o.anchorEl,c=Boolean(s);return n.a.createElement("div",null,n.a.createElement(h.a,{position:"static",color:"primary"},n.a.createElement(g.a,null,n.a.createElement("img",{src:"/images/logo.png",className:"App-logo",alt:"logo"}),n.a.createElement("span",{className:a.flex}),l&&n.a.createElement("div",null,n.a.createElement(b.a,{"aria-owns":c?"menu-appbar":null,"aria-haspopup":"true",onClick:this.handleMenu,color:"inherit"},n.a.createElement(S.a,null)),n.a.createElement(E.a,{id:"menu-appbar",anchorEl:s,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:c,onClose:this.handleClose},n.a.createElement(v.a,{onClick:function(){r.setCurrentSection("settings"),e.handleClose()}},"Settings"),n.a.createElement(v.a,{onClick:function(){r.setAboutDialogOpen(),e.handleClose()}},"About"))))))}}]),t}(n.a.Component),P=Object(s.b)("appStore")(Object(y.a)({root:{flexGrow:1},flex:{flex:1},menuButton:{marginLeft:-12,marginRight:20},githubButton:{bordeR:0,color:"red"}})(Object(s.c)(C))),O=a(628),w=a(582),k=a(626),T=a(627),x=a(110),j=a.n(x),N=a(74),A=a.n(N),R=a(113),L=a.n(R),D=a(111),z=a.n(D),U=a(114),I=a.n(U),M=a(112),B=a.n(M),F=a(115),K=a.n(F),_=a(116),W=a.n(_),H=a(117),J=a.n(H),q=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.apiStore,r=e.appStore,o=function(e,t){r.setCurrentSection(t),r.isResourceSection()||r.isLocOrRegSection()?a.loadResources(t):r.isSettingsSection()&&a.loadConfig()};return n.a.createElement("div",{className:t.root},n.a.createElement(w.a,{button:!0,onClick:function(e){return o(0,"domains")}},n.a.createElement(k.a,null,n.a.createElement(j.a,null)),n.a.createElement(T.a,{primary:"Domains"})),n.a.createElement(w.a,{button:!0,onClick:function(e){return o(0,"agents")}},n.a.createElement(k.a,null,n.a.createElement(z.a,null)),n.a.createElement(T.a,{primary:"Agents"})),n.a.createElement(w.a,{button:!0,onClick:function(e){return o(0,"peers")}},n.a.createElement(k.a,null,n.a.createElement(B.a,null)),n.a.createElement(T.a,{primary:"Peers"})),n.a.createElement(w.a,{button:!0,onClick:function(e){return o(0,"gateways")}},n.a.createElement(k.a,null,n.a.createElement(L.a,null)),n.a.createElement(T.a,{primary:"Gateways"})),n.a.createElement(w.a,{button:!0,onClick:function(e){return o(0,"numbers")}},n.a.createElement(k.a,null,n.a.createElement(I.a,null)),n.a.createElement(T.a,{primary:"Numbers"})),n.a.createElement(w.a,{button:!0,onClick:function(e){return o(0,"location")}},n.a.createElement(k.a,null,n.a.createElement(K.a,null)),n.a.createElement(T.a,{primary:"Location"})),n.a.createElement(w.a,{button:!0,onClick:function(e){return o(0,"registration")}},n.a.createElement(k.a,null,n.a.createElement(W.a,null)),n.a.createElement(T.a,{primary:"Registration"})),n.a.createElement(O.a,null),n.a.createElement(w.a,{button:!0,onClick:function(e){return o(0,"settings")}},n.a.createElement(k.a,null,n.a.createElement(A.a,null)),n.a.createElement(T.a,{primary:"Settings"})),n.a.createElement(w.a,{button:!0,onClick:function(e){return window.open("https://github.com/fonoster/routr/issues","_blank")}},n.a.createElement(k.a,null,n.a.createElement(J.a,null)),n.a.createElement(T.a,{primary:"Help"})))}}]),t}(n.a.Component),G=Object(s.b)("apiStore")(Object(s.b)("appStore")(Object(y.a)((function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper}}}))(Object(s.c)(q)))),Y=a(118),$=a(3),V=a(632),X=a(633),Q=a(631),Z=a(629),ee=a(657),te=a(630),ae=a(656),re=a(49),ne=a(87),oe=a(650),le=a(655),se=a(120),ce=a.n(se),ie=a(121),ue=a.n(ie),de=a(76);function me(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}var pe=function(e){function t(){var e,a;Object(c.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(n)))).createSortHandler=function(e){return function(t){a.props.onRequestSort(t,e)}},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.onSelectAllClick,r=t.order,o=t.orderBy,l=t.numSelected,s=t.rowCount,c=t.columnData;return n.a.createElement(Z.a,null,n.a.createElement(te.a,null,n.a.createElement(Q.a,{padding:"checkbox"},n.a.createElement(oe.a,{indeterminate:l>0&&l<s,checked:l===s,onChange:a})),c.map((function(t){return n.a.createElement(Q.a,{key:t.id,padding:t.disablePadding?"none":"default",sortDirection:o===t.pos&&r},n.a.createElement(le.a,{title:"Sort",placement:t.numeric?"bottom-end":"bottom-start",enterDelay:300},n.a.createElement(ae.a,{active:o===t.pos,direction:r,onClick:e.createSortHandler(t.pos)},t.label)))}),this)))}}]),t}(n.a.Component),he=function(e){var t=e.numSelected,a=e.classes,r=e.name,o=e.handleDeleteItems;return n.a.createElement(g.a,{className:Object($.a)(a.root,Object(Y.a)({},a.highlight,t>0))},n.a.createElement("div",{className:a.title},t>0?n.a.createElement(re.a,{color:"inherit",variant:"subtitle1"},t," selected"):n.a.createElement(re.a,{variant:"h6",id:"tableTitle"},r)),n.a.createElement("div",{className:a.spacer}),n.a.createElement("div",{className:a.actions},t>0?n.a.createElement(le.a,{title:"Delete"},n.a.createElement(b.a,{"aria-label":"Delete",onClick:o},n.a.createElement(ce.a,null))):n.a.createElement(le.a,{title:"Add"},n.a.createElement(b.a,{"aria-label":"Add",onClick:e.appStore.setFileUploaderOpen},n.a.createElement(ue.a,null)))))};he=Object(s.b)("appStore")(Object(y.a)((function(e){return{root:{paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(de.lighten)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},spacer:{flex:"1 1 100%"},actions:{color:e.palette.text.secondary},title:{flex:"0 0 auto"}}}))(Object(s.c)(he)));var ge=function(e){function t(e,a){var r;return Object(c.a)(this,t),(r=Object(u.a)(this,Object(d.a)(t).call(this,e,a))).handleRequestSort=function(e,t){var a=t,n="desc";r.state.orderBy===t&&"desc"===r.state.order&&(n="asc"),r.setState({order:n,orderBy:a})},r.handleSelectAllClick=function(e,t){t?r.setState({selected:r.state.data.map((function(e){return e.c1}))}):r.setState({selected:[]})},r.handleClick=function(e,t){var a=r.state.selected,n=a.indexOf(t),o=[];-1===n?o=o.concat(a,t):0===n?o=o.concat(a.slice(1)):n===a.length-1?o=o.concat(a.slice(0,-1)):n>0&&(o=o.concat(a.slice(0,n),a.slice(n+1))),r.setState({selected:o})},r.handleChangePage=function(e,t){return r.setState({page:t})},r.handleChangeRowsPerPage=function(e){return r.setState({rowsPerPage:e.target.value})},r.isSelected=function(e){return-1!==r.state.selected.indexOf(e)},r.showResourceEditor=function(e){r.props.appStore.setCurrentResource(e),r.props.appStore.setResourceEditorOpen()},r.handleDeleteItems=function(e){return r.props.apiStore.delete(r.props.appStore.getCurrentSection(),e)},r.state={order:"asc",orderBy:"",selected:[],data:e.data,page:0,rowsPerPage:5},r}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,r=t.columnData,o=t.name,l=t.data,s=this.state,c=s.order,i=s.orderBy,u=s.selected,d=s.rowsPerPage,m=s.page,p=d-Math.min(d,l.length-m*d);return n.a.createElement(ne.a,{className:a.root},n.a.createElement(he,{name:o,numSelected:u.length,handleDeleteItems:function(t){e.handleDeleteItems(u),e.setState({selected:[]})}}),n.a.createElement("div",{className:a.tableWrapper},n.a.createElement(V.a,{className:a.table,"aria-labelledby":"tableTitle"},n.a.createElement(pe,{columnData:r,numSelected:u.length,order:c,orderBy:i,onSelectAllClick:this.handleSelectAllClick,onRequestSort:this.handleRequestSort,rowCount:l.length}),n.a.createElement(X.a,null,function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var r=t(e[0],a[0]);return 0!==r?r:e[1]-a[1]})),a.map((function(e){return e[0]}))}(l,function(e,t){return"desc"===e?function(e,a){return me(e,a,t)}:function(e,a){return-me(e,a,t)}}(c,i)).slice(m*d,m*d+d).map((function(t){var r=e.isSelected(t.c1);return n.a.createElement(te.a,{hover:!0,role:"checkbox","aria-checked":r,tabIndex:-1,key:t.c1,selected:r},n.a.createElement(Q.a,{padding:"checkbox",onClick:function(a){return e.handleClick(a,t.c1)}},n.a.createElement(oe.a,{checked:r})),n.a.createElement(Q.a,{onClick:function(a){return e.showResourceEditor(t.c2)},className:a.cursor,component:"th",scope:"row",padding:"none"},t.c3),n.a.createElement(Q.a,{onClick:function(a){return e.showResourceEditor(t.c2)},className:a.cursor},t.c4),t.c5&&n.a.createElement(Q.a,{onClick:function(a){return e.showResourceEditor(t.c2)},className:a.cursor},t.c5),t.c6&&n.a.createElement(Q.a,{onClick:function(a){return e.showResourceEditor(t.c2)},className:a.cursor},t.c6),t.c7&&n.a.createElement(Q.a,{onClick:function(a){return e.showResourceEditor(t.c2)},className:a.cursor},t.c7),n.a.createElement(Q.a,{onClick:function(a){return e.showResourceEditor(t.c2)},className:a.cursor},t.c1))})),p>0&&n.a.createElement(te.a,{style:{height:49*p}},n.a.createElement(Q.a,{colSpan:6}))))),n.a.createElement(ee.a,{rowsPerPageOptions:[5,10,25],component:"div",count:l.length,rowsPerPage:d,page:m,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.data!==t.data?{data:e.data,selected:[]}:null}}]),t}(n.a.Component),be=Object(s.b)("apiStore")(Object(s.b)("appStore")(Object(y.a)((function(e){return{root:{width:"100%",marginTop:e.spacing(3)},table:{minWidth:1020},tableWrapper:{overflowX:"auto"},cursor:{cursor:"pointer"}}}))(Object(s.c)(ge)))),fe=a(83),Se=a.n(fe),ve=(a(165),a(567),a(568),a(569),a(639)),Ee=a(42),ye=a.n(Ee),Ce=a(649),Pe=a(640),Oe=a(84),we=a.n(Oe),ke=a(85),Te=a.n(ke),xe=a(641),je=a(636),Ne=a(637),Ae=a(638),Re=Object(y.a)((function(e){return{root:{borderBottom:"1px solid ".concat(e.palette.divider),margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var t=e.children,a=e.classes,r=e.onClose;return n.a.createElement(je.a,{disableTypography:!0,className:a.root},n.a.createElement(re.a,{variant:"h6"},t),r?n.a.createElement(b.a,{"aria-label":"Close",className:a.closeButton,onClick:r},n.a.createElement(ye.a,null)):null)})),Le=Object(y.a)((function(e){return{root:{margin:0,padding:0}}}))(Ne.a),De=Object(y.a)((function(e){return{root:{borderTop:"1px solid ".concat(e.palette.divider),margin:0,padding:e.spacing(1)}}}))(Ae.a),ze=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleTabsChange=function(e,t){if(a.setState({tab:t}),0===t)a.setState({resourceYaml:we.a.stringify(JSON.parse(a.state.resourceJson))});else{var r=JSON.stringify(Te.a.parse(a.state.resourceYaml),null,"\t");a.setState({resourceJson:r})}},a.handleChangeJson=function(e){a.setState({resourceJson:e}),a.setState({jsonEditorAnnotations:a.refs.jsonEditor.editor.getSession().getAnnotations()})},a.handleChangeYaml=function(e){a.setState({resourceYaml:e}),a.setState({yamlEditorAnnotations:a.refs.yamlEditor.editor.getSession().getAnnotations()})},a.saveResource=function(){try{var e=1===a.state.tab?a.state.resourceJson:JSON.stringify(Te.a.parse(a.state.resourceYaml));a.props.apiStore.update(e),a.props.appStore.setResourceEditorOpen(),a.setState({resource:void 0})}catch(t){a.props.appStore.notify("Malformed document.")}},a.state={tab:0},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"UNSAFE_componentWillUpdate",value:function(){var e=JSON.parse(this.props.appStore.getCurrentResource());if(!this.state.resource||this.state.resource.metadata.ref!==e.metadata.ref){var t=JSON.stringify(e,null,"\t"),a=we.a.stringify(e);this.setState({resource:e,resourceJson:t,resourceYaml:a})}}},{key:"render",value:function(){var e=this.state.tab;return n.a.createElement("div",null,n.a.createElement(ve.a,{"aria-labelledby":"customized-dialog-title",onClose:this.props.appStore.setResourceEditorOpen,open:this.props.appStore.isResourceEditorOpen()},n.a.createElement(Re,{id:"customized-dialog-title",onClose:this.props.appStore.setResourceEditorOpen},"Edit a resource"),n.a.createElement(Ce.a,{onChange:this.handleTabsChange,value:e},n.a.createElement(Pe.a,{label:"YAML"}),n.a.createElement(Pe.a,{label:"JSON"})),n.a.createElement(Le,null,0===e&&n.a.createElement(Se.a,{ref:"yamlEditor",mode:"yaml",theme:"textmate",showGutter:!0,value:this.state.resourceYaml,onChange:this.handleChangeYaml,editorProps:{$blockScrolling:!0}}),1===e&&n.a.createElement(Se.a,{ref:"jsonEditor",mode:"json",theme:"textmate",showGutter:!0,value:this.state.resourceJson,onChange:this.handleChangeJson,editorProps:{$blockScrolling:!1}})),n.a.createElement(De,null,n.a.createElement(xe.a,{size:"small",variant:"contained",disableElevation:!0,color:"secondary",onClick:this.saveResource},"Save"),n.a.createElement(xe.a,{size:"small",variant:"contained",disableElevation:!0,onClick:this.props.appStore.setResourceEditorOpen},"Cancel"))))}}]),t}(n.a.Component),Ue=Object(s.b)("apiStore")(Object(s.b)("appStore")(Object(y.a)({appBar:{position:"relative"},flex:{flex:1}})(Object(s.c)(ze)))),Ie=a(122),Me=a.n(Ie),Be=a(86),Fe=a(123),Ke=a.n(Fe);function _e(e){return e.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))}function We(e,t){t||(t=window.location.href),e=e.replace(/[[]]/g,"\\$&");var a=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return a?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null}function He(e,t,a,r){var n=e+"/"+t;return a&&(n=n+"?filter="+a),r&&(n=a?n+"&token="+r:n+"?token="+r),n}var Je=function(e){return e&&e.length>0},qe=function(e){return!Je(e)||Be.ipv4.isValid(e)},Ge=function(e){return!Je(e)||!isNaN(e)},Ye=function(e){return!Je(e)||Ke()(e)},$e=function(e){return!Je(e)||!isNaN(e)},Ve=function(e){if(!Je(e))return!0;var t=e.toString().split("\n");return t.filter((function(e){return Be.ipv4.isSubnet(e)})).length===t.length},Xe=function(e){return!Je(e)||0===e.split(",").filter((function(e){return 1===e.split("=").length||0===e.split("=")[1].length||!isNaN(e.split("=")[0])})).length},Qe=Object(y.a)((function(e){return{root:{borderBottom:"1px solid ".concat(e.palette.divider),margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var t=e.children,a=e.classes,r=e.onClose;return n.a.createElement(je.a,{disableTypography:!0,className:a.root},n.a.createElement(re.a,{variant:"h6"},t),r?n.a.createElement(b.a,{"aria-label":"Close",className:a.closeButton,onClick:r},n.a.createElement(ye.a,null)):null)})),Ze=Object(y.a)((function(e){return{root:{margin:0,padding:0}}}))(Ne.a),et=function(e){function t(){var e,a;Object(c.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(n)))).state={oldCnt:0},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.apiStore,r=t.appStore,o={success:function(e){a.loadResources(r.getCurrentSection()),r.setFileUploaderOpen(),r.notify("Resources added.")},sending:function(){return e.setState({oldCnt:a.resources.length})},error:function(e){r.notify("An error occurred while adding resources.")}},l={iconFiletypes:[".yaml",".yml"],showFiletypeIcon:!0,postUrl:He(a.getAPIUrl(),r.getCurrentSection(),"",a.getToken())};return n.a.createElement("div",null,n.a.createElement(ve.a,{"aria-labelledby":"customized-dialog-title",open:this.props.appStore.isFileUploaderOpen(),onClose:this.props.appStore.setFileUploaderOpen},n.a.createElement(Qe,{id:"customized-dialog-title",onClose:this.props.appStore.setFileUploaderOpen},"Submit Resource File"),n.a.createElement(Ze,{style:{padding:10}},n.a.createElement(Me.a,{eventHandlers:o,djsConfig:{addRemoveLinks:!0},config:l}))))}}]),t}(n.a.Component),tt=Object(s.b)("apiStore")(Object(s.b)("appStore")(Object(y.a)({appBar:{position:"relative"},flex:{flex:1}})(Object(s.c)(et)))),at=a(124),rt=a.n(at),nt=a(642),ot=a(644),lt=a(643);var st=Object(s.b)("appStore")(Object(y.a)((function(e){return{button:{margin:e.spacing(1)},input:{display:"none"},card:{maxWidth:300,position:"relative",margin:"10% auto",padding:8},title:{marginBottom:16,fontSize:14},pos:{marginBottom:12}}}))(Object(s.c)((function(e){var t=e.classes,a=e.resource;return n.a.createElement("div",null,n.a.createElement(nt.a,{justify:"center",className:t.card},n.a.createElement(lt.a,null,n.a.createElement(re.a,{className:t.title,color:"textSecondary"},"No resources found"),n.a.createElement(re.a,{component:"h2"},a),n.a.createElement(re.a,{className:t.pos,color:"textSecondary"},"resource"),n.a.createElement(re.a,{component:"p"},"At this time not resources found on the ",a.toLowerCase()," section. Go to the documentation to learn more about resources ",n.a.createElement("a",{href:"https://routr.io/docs"},n.a.createElement(rt.a,{style:{color:"#3F51B5",fontSize:18}})))),n.a.createElement(ot.a,null,n.a.createElement(xe.a,{className:t.button,variant:"contained",onClick:e.appStore.setFileUploaderOpen,color:"secondary",size:"small",disableElevation:!0},"Add ",a))))})))),ct=a(56),it=a.n(ct),ut=[{id:"name",numeric:!1,disablePadding:!0,label:"Domain Name",pos:"c1"},{id:"uri",numeric:!1,disablePadding:!1,label:"URI",pos:"c2"},{id:"modified",numeric:!1,disablePadding:!1,label:"Modified",pos:"c3"},{id:"ref",numeric:!1,disablePadding:!1,label:"Ref",pos:"c4"}];function dt(e){return{c1:e.metadata.ref,c2:JSON.stringify(e),c3:e.metadata.name,c4:e.spec.context.domainUri,c5:it()(e.metadata.modifiedOn).fromNow()}}var mt=[{id:"name",numeric:!1,disablePadding:!0,label:"Agent Name",pos:"c1"},{id:"username",numeric:!1,disablePadding:!1,label:"Username",pos:"c2"},{id:"modified",numeric:!1,disablePadding:!1,label:"Modified",pos:"c3"},{id:"ref",numeric:!1,disablePadding:!1,label:"Ref",pos:"c4"}];var pt=[{id:"name",numeric:!1,disablePadding:!0,label:"Peer Name",pos:"c1"},{id:"username",numeric:!1,disablePadding:!1,label:"Username",pos:"c2"},{id:"modified",numeric:!1,disablePadding:!1,label:"Modified",pos:"c3"},{id:"ref",numeric:!1,disablePadding:!1,label:"Ref",pos:"c4"}];var ht=[{id:"name",numeric:!1,disablePadding:!0,label:"Gateway",pos:"c1"},{id:"username",numeric:!1,disablePadding:!1,label:"Username",pos:"c2"},{id:"host",numeric:!1,disablePadding:!1,label:"Host",pos:"c3"},{id:"modified",numeric:!1,disablePadding:!1,label:"Modified",pos:"c4"},{id:"ref",numeric:!1,disablePadding:!1,label:"Ref",pos:"c5"}];var gt=[{id:"number",numeric:!1,disablePadding:!0,label:"Number",pos:"c1"},{id:"location",numeric:!1,disablePadding:!1,label:"Location",pos:"c2"},{id:"aorLink",numeric:!1,disablePadding:!1,label:"AOR Link",pos:"c3"},{id:"modified",numeric:!1,disablePadding:!1,label:"Modified",pos:"c4"},{id:"ref",numeric:!1,disablePadding:!1,label:"Ref",pos:"c5"}];var bt=[{id:"addressOfRecord",numeric:!1,disablePadding:!0,label:"Address Of Record",pos:"c1"},{id:"contactInfo",numeric:!1,disablePadding:!1,label:"Contact Information",pos:"c2"}];var ft=[{id:"host",numeric:!1,disablePadding:!1,label:"Host",pos:"c1"},{id:"username",numeric:!1,disablePadding:!0,label:"Username",pos:"c2"},{id:"ipAddress",numeric:!1,disablePadding:!1,label:"IP",pos:"c3"},{id:"registered",numeric:!1,disablePadding:!1,label:"Registered",pos:"c4"}];function St(e){switch(e){case"domains":return ut;case"agents":return mt;case"peers":return pt;case"gateways":return ht;case"numbers":return gt;case"location":return bt;case"registration":return ft;default:return ut}}function vt(e,t){switch(t){case"domains":return dt(e);case"agents":case"peers":return function(e){return{c1:e.metadata.ref,c2:JSON.stringify(e),c3:e.metadata.name,c4:e.spec.credentials.username,c5:it()(e.metadata.modifiedOn).fromNow()}}(e);case"gateways":return function(e){return{c1:e.metadata.ref,c2:JSON.stringify(e),c3:e.metadata.name,c4:e.spec.credentials&&e.spec.credentials.username?e.spec.credentials.username:"None",c5:e.spec.host,c6:it()(e.metadata.modifiedOn).fromNow()}}(e);case"numbers":return function(e){var t=e.metadata.geoInfo.city+", "+e.metadata.geoInfo.country;return{c1:e.metadata.ref,c2:JSON.stringify(e),c3:e.spec.location.telUrl,c4:t,c5:e.spec.location.aorLink,c6:it()(e.metadata.modifiedOn).fromNow()}}(e);case"location":return function(e){return{c1:e.addressOfRecord,c2:e.contactInfo}}(e);case"registration":return function(e){return console.log("item:"+JSON.stringify(e)),{c1:e.user,c2:e.host,c3:e.ip,c4:e.regOnFormatted}}(e);default:return dt(e)}}var Et=a(129),yt=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.appStore,r=t.apiStore,o=function(){return r.getResources().length>0},l=function(){return _e(a.getCurrentSection())},s=St(a.getCurrentSection()),c=r.getResources();return n.a.createElement("div",null,o()&&n.a.createElement(Et.a,{in:!0},n.a.createElement(be,{hide:!0,name:l(),columnData:s,data:c})),!o()&&n.a.createElement(Et.a,{in:!0},n.a.createElement(st,{resource:l(),handleAddItem:function(t){return e.setState({fileUploaderOpen:!0})}})),n.a.createElement(Ue,null),n.a.createElement(tt,null))}}]),t}(n.a.Component),Ct=Object(s.b)("apiStore")(Object(s.b)("appStore")(Object(s.c)(yt))),Pt=a(645),Ot=function(e){return{heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary},textField:{marginBottom:10,width:320,marginRight:10},bcLink:{color:e.palette.primary.main,textDecoration:"none","&:hover":{textDecoration:"underline"},display:"flex"},link2:{color:e.palette.primary.main,textDecoration:"none","&:hover":{textDecoration:"underline"},display:"flex"},root:{marginBottom:e.spacing(2)},link:{display:"flex",marginTop:5},icon:{marginRight:e.spacing(.5),width:20,height:20}}};var wt=Object(y.a)(Ot)((function(e){var t=e.onChangeSection,a=e.classes,r=function(e,a){e.preventDefault(),t(a)};return n.a.createElement("div",null,n.a.createElement(Pt.a,{color:"secondary",href:"/",onClick:function(e){return r(e,"general")},className:a.link},"General"),n.a.createElement(Pt.a,{color:"secondary",onClick:function(e){return r(e,"networking_and_transport")},href:"/",className:a.link},"Networking and Transport"),n.a.createElement(Pt.a,{color:"secondary",onClick:function(e){return r(e,"nat")},href:"/",className:a.link},"NAT"),n.a.createElement(Pt.a,{color:"secondary",onClick:function(e){return r(e,"access_control_lists")},href:"/",className:a.link},"Access Control Lists"),n.a.createElement(Pt.a,{color:"secondary",onClick:function(e){return r(e,"data_access")},href:"/",className:a.link},"Data Access"),n.a.createElement(Pt.a,{color:"secondary",onClick:function(e){return r(e,"rest_service")},href:"/",className:a.link},"Rest Service"),n.a.createElement(Pt.a,{color:"secondary",onClick:function(e){return r(e,"certificates")},href:"/",className:a.link},"Certificates"))})),kt=a(658);var Tt=Object(y.a)(Ot)((function(e){var t=e.onSave,a=e.onCancel,r=e.config,o=e.onChange,l=e.classes;return n.a.createElement("div",null,n.a.createElement(re.a,{className:l.secondaryHeading},"Sets the SIP header User-Agent to the desired value. ",n.a.createElement("br",null)," If not value is provided, the server will use ",n.a.createElement("em",null,"`Routr $version.`")),n.a.createElement("br",null),n.a.createElement(kt.a,{id:"userAgent",label:"User Agent",multiline:!0,rowsMax:"4",value:r.userAgent,onChange:o,className:l.textField,size:"small",variant:"outlined",placeholder:"Routr v1.0"}),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("div",null,n.a.createElement(xe.a,{onClick:t,size:"small",variant:"contained",color:"secondary",disableElevation:!0},"Save"),n.a.createElement(xe.a,{onClick:a,style:{marginLeft:5},size:"small",variant:"contained",disableElevation:!0},"Cancel")))}));var xt=Object(y.a)(Ot)((function(e){var t=e.onSave,a=e.onCancel,r=e.config,o=e.onChange,l=e.classes;return n.a.createElement("div",null,n.a.createElement(re.a,{className:l.secondaryHeading},"This is the default IP address for the SIP stack. ",n.a.createElement("br",null),"All Sip traffic will be routed through this interface."),n.a.createElement("br",null),n.a.createElement(kt.a,{id:"bindAddr",label:"Bind Address",value:r.bindAddr,onChange:o,className:l.textField,error:!qe(r.bindAddr),variant:"outlined",size:"small",placeholder:"192.168.1.12"}),n.a.createElement("br",null),n.a.createElement(kt.a,{id:"udpPort",label:"UDP Port",onChange:o,className:l.textField,value:r.transportPorts.udp,error:!Ge(r.transportPorts.udp),variant:"outlined",size:"small",placeholder:"5060",inputProps:{maxLength:5}}),n.a.createElement("br",null),n.a.createElement(re.a,{className:l.secondaryHeading},"You can use the same port number for both TCP",n.a.createElement("br",null)," and UDP."),n.a.createElement("br",null),n.a.createElement(kt.a,{id:"tcpPort",label:"TCP Port",onChange:o,className:l.textField,value:r.transportPorts.tcp,error:!Ge(r.transportPorts.tcp),variant:"outlined",size:"small",placeholder:"5060",inputProps:{maxLength:5}}),n.a.createElement("br",null),n.a.createElement(re.a,{className:l.secondaryHeading},"Secure transport, like TLS and WSS, required",n.a.createElement("br",null),"a valid certificate to secure the SIP signaling."),n.a.createElement("br",null),n.a.createElement(kt.a,{id:"tlsPort",label:"TLS Port",onChange:o,className:l.textField,value:r.transportPorts.tls,error:!Ge(r.transportPorts.tls),variant:"outlined",size:"small",placeholder:"5061",inputProps:{maxLength:5}}),n.a.createElement("br",null),n.a.createElement(kt.a,{id:"wsPort",label:"WS Port",onChange:o,className:l.textField,value:r.transportPorts.ws,error:!Ge(r.transportPorts.ws),variant:"outlined",size:"small",placeholder:"5062",inputProps:{maxLength:5}}),n.a.createElement("br",null),n.a.createElement(kt.a,{id:"wssPort",label:"WSS Port",onChange:o,className:l.textField,value:r.transportPorts.wss,error:!Ge(r.transportPorts.wss),variant:"outlined",size:"small",placeholder:"5063",inputProps:{maxLength:5}}),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("div",null,n.a.createElement(xe.a,{disabled:!(qe(r.bindAddr)&&Ge(r.transportPorts.udp)&&Ge(r.transportPorts.tcp)&&Ge(r.transportPorts.tls)&&Ge(r.transportPorts.ws)&&Ge(r.transportPorts.wss)),onClick:t,size:"small",variant:"contained",color:"secondary",disableElevation:!0},"Save"),n.a.createElement(xe.a,{onClick:a,style:{marginLeft:5},size:"small",variant:"contained",disableElevation:!0},"Cancel")))})),jt=a(646),Nt=a(659),At=a(651),Rt=a(647);var Lt=Object(y.a)(Ot)((function(e){var t=e.onSave,a=e.onCancel,r=e.config,o=e.onChange,l=e.classes;return n.a.createElement("div",null,n.a.createElement(re.a,{className:l.secondaryHeading},"The IP address to advertise. This must be used",n.a.createElement("br",null),"in combination with Localnets. If Localnets is",n.a.createElement("br",null)," empty, the External Address will be ignored."),n.a.createElement("br",null),n.a.createElement(kt.a,{id:"externAddr",label:"External Address",value:r.externAddr,onChange:o,className:l.textField,error:!qe(r.externAddr),variant:"outlined",size:"small",placeholder:"172.220.246.46"}),n.a.createElement("br",null),n.a.createElement(kt.a,{id:"localnets",label:"Localnets",multiline:!0,rowsMax:"4",rows:"3",value:r.localnets,onChange:o,error:!Ve(r.localnets),className:l.textField,variant:"outlined",size:"small",placeholder:"192.168.1.149/32"}),n.a.createElement("br",null),n.a.createElement(re.a,{className:l.secondaryHeading},"Choosing Internal causes the server to use the",n.a.createElement("br",null),' IP and port it "sees"(received & rport) from a ',n.a.createElement("br",null)," device attempting to register. You will rarely need",n.a.createElement("br",null)," to change this!"),n.a.createElement("br",null),n.a.createElement(jt.a,{size:"small",variant:"outlined",className:l.textField},n.a.createElement(Nt.a,null,"Registration Interface"),n.a.createElement(At.a,{value:r.registrarIntf,onChange:o,labelWidth:155,size:"small"},n.a.createElement(v.a,{id:"registrarIntf",value:"Internal"},n.a.createElement("em",null,"Internal")),n.a.createElement(v.a,{id:"registrarIntf",value:"External"},"External"))),n.a.createElement("br",null),n.a.createElement(Rt.a,{control:n.a.createElement(oe.a,{id:"recordRoute",onChange:o,checked:r.recordRoute,color:"primary",size:"small"}),label:"Record-Route"}),n.a.createElement("br",null),n.a.createElement(re.a,{variant:"caption"},"Check if you want server to stay within the signaling path",n.a.createElement("br",null),n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://routr.io/docs/configuration/general/",className:l.link2},"Learn more")),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("div",null,n.a.createElement(xe.a,{disabled:!(qe(r.externAddr)&&Ve(r.localnets)),onClick:t,size:"small",variant:"contained",color:"secondary",disableElevation:!0},"Save"),n.a.createElement(xe.a,{onClick:a,style:{marginLeft:5},size:"small",variant:"contained",disableElevation:!0},"Cancel")))}));var Dt=Object(y.a)(Ot)((function(e){var t=e.onSave,a=e.onCancel,r=e.config,o=e.onChange,l=e.classes;return n.a.createElement("div",null,n.a.createElement(re.a,{className:l.secondaryHeading},"The recommended provider for production is",n.a.createElement("br",null),n.a.createElement("em",null,"redis_data_provider.")),n.a.createElement("br",null),n.a.createElement(jt.a,{size:"small",variant:"outlined",className:l.formControl},n.a.createElement(Nt.a,null,"Data Source Provider"),n.a.createElement(At.a,{labelId:"demo-simple-select-outlined-label",value:r.dsProvider,onChange:o,labelWidth:155},n.a.createElement(v.a,{id:"dsProvider",value:"files_data_provider"},n.a.createElement("em",null,"Files Data Source")),n.a.createElement(v.a,{id:"dsProvider",value:"redis_data_provider"},"Redis Data Provider"))),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement(kt.a,{id:"dsParameters",label:"Data Source Parameters",value:r.dsParameters,onChange:o,className:l.textField,error:!Xe(r.dsParameters),variant:"outlined",size:"small",placeholder:"host=localhost,port=6379"}),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("div",null,n.a.createElement(xe.a,{disabled:!Xe(r.dsParameters),onClick:t,size:"small",variant:"contained",color:"secondary",disableElevation:!0},"Save"),n.a.createElement(xe.a,{onClick:a,style:{marginLeft:5},size:"small",variant:"contained",disableElevation:!0},"Cancel")))}));var zt=Object(y.a)(Ot)((function(e){var t=e.onSave,a=e.onCancel,r=e.config,o=e.onChange,l=e.classes;return n.a.createElement("div",null,n.a.createElement(re.a,{className:l.secondaryHeading},"This is the default IP address for the Rest service. ",n.a.createElement("br",null)," All HTTP traffic will be routed through this interface."),n.a.createElement("br",null),n.a.createElement(kt.a,{id:"restBindAddr",label:"Bind Address",value:r.restBindAddr,onChange:o,className:l.textField,error:!qe(r.restBindAddr),variant:"outlined",size:"small",placeholder:"0.0.0.0"}),n.a.createElement("br",null),n.a.createElement(kt.a,{id:"restPort",label:"HTTP Port",onChange:o,className:l.textField,value:r.restPort,error:!Ge(r.restPort),variant:"outlined",size:"small",placeholder:"4567"}),n.a.createElement("br",null),n.a.createElement(re.a,{className:l.secondaryHeading},"Minimum thread allocation. Defaults to 8."),n.a.createElement("br",null),n.a.createElement(kt.a,{id:"restMinThreads",label:"Minimum Threads",onChange:o,className:l.textField,value:r.restMinThreads,variant:"outlined",size:"small",error:!$e(r.restMinThreads),placeholder:"8"}),n.a.createElement("br",null),n.a.createElement(re.a,{className:l.secondaryHeading},"Maximum thread allocation. Defaults to 200."),n.a.createElement("br",null),n.a.createElement(kt.a,{id:"restMaxThreads",label:"Maximum Threads",onChange:o,className:l.textField,value:r.restMaxThreads,error:!$e(r.restMaxThreads),variant:"outlined",size:"small",placeholder:"200"}),n.a.createElement("br",null),n.a.createElement(re.a,{className:l.secondaryHeading},"Will reject requests that last more than the timeout. ",n.a.createElement("br",null),"Defaults to 5000(5 seconds.)"),n.a.createElement("br",null),n.a.createElement(kt.a,{id:"restTimeOutMillis",label:"Request Timeout",onChange:o,className:l.textField,value:r.restTimeOutMillis,error:isNaN(r.restTimeOutMillis),variant:"outlined",size:"small",placeholder:"5000"}),n.a.createElement("br",null),n.a.createElement(kt.a,{id:"restKeyStorePath",label:"KeyStore Path",onChange:o,className:l.textField,value:r.restKeyStorePath,variant:"outlined",size:"small",placeholder:"/etc/certificates/api-cert.jks"}),n.a.createElement("br",null),n.a.createElement(kt.a,{id:"restTrustStorePath",label:"TrustStore Path",onChange:o,className:l.textField,value:r.restTrustStorePath,variant:"outlined",size:"small",placeholder:"/etc/certificates/api-cert.jks"}),n.a.createElement("br",null),n.a.createElement(kt.a,{id:"restKeyStorePassword",label:"KeyStore Password",onChange:o,className:l.textField,value:r.restKeyStorePassword,variant:"outlined",type:"password",size:"small"}),n.a.createElement("br",null),n.a.createElement(kt.a,{id:"restTrustStorePassword",label:"TrustStore Password",onChange:o,className:l.textField,value:r.restTrustStorePassword,variant:"outlined",type:"password",size:"small"}),n.a.createElement("br",null),n.a.createElement(Rt.a,{control:n.a.createElement(oe.a,{id:"restUnsecured",onChange:o,checked:r.restUnsecured,color:"primary",size:"small"}),label:"Allow Unsecured"}),n.a.createElement("br",null),n.a.createElement(re.a,{variant:"caption"},"Check if you want to enable unsecured connections with",n.a.createElement("br",null),"the APIs. Not recommended.",n.a.createElement("br",null),n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://routr.io/docs/configuration/general/",className:l.link2},"Learn more")),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("div",null,n.a.createElement(xe.a,{disabled:!(qe(r.restBindAddr)&&Ge(r.restPort)&&Ye(r.restKeyStorePath)&&Ye(r.restTrustStorePath)&&$e(r.restMinThreads)&&$e(r.restMaxThreads)&&!isNaN(r.restTimeOutMillis)),onClick:t,size:"small",variant:"contained",color:"secondary",disableElevation:!0},"Save"),n.a.createElement(xe.a,{onClick:a,style:{marginLeft:5},size:"small",variant:"contained",disableElevation:!0},"Cancel")))}));var Ut=Object(y.a)(Ot)((function(e){var t=e.onSave,a=e.onCancel,r=e.config,o=e.onChange,l=e.classes;return n.a.createElement("div",null,n.a.createElement(re.a,{className:l.secondaryHeading},"This configurations affect all your domains."),n.a.createElement("br",null),n.a.createElement(jt.a,{size:"small",variant:"outlined",className:l.textField},n.a.createElement(Nt.a,null,"Client Authentication Type"),n.a.createElement(At.a,{value:r.scClientAuthType,onChange:o,labelWidth:200,size:"small"},n.a.createElement(v.a,{id:"scClientAuthType",value:"DisabledAll"},n.a.createElement("em",null,"DisabledAll")),n.a.createElement(v.a,{id:"scClientAuthType",value:"Disabled"},"Disabled"),n.a.createElement(v.a,{id:"scClientAuthType",value:"Enabled"},"Enabled"),n.a.createElement(v.a,{id:"scClientAuthType",value:"Want"},"Want"))),n.a.createElement("br",null),n.a.createElement(jt.a,{size:"small",variant:"outlined",className:l.textField},n.a.createElement(Nt.a,null,"KeyStore Type"),n.a.createElement(At.a,{value:r.scKeyStoreType,onChange:o,labelWidth:200,size:"small"},n.a.createElement(v.a,{id:"scKeyStoreType",value:"jks"},n.a.createElement("em",null,"JKS")),n.a.createElement(v.a,{id:"scKeyStoreType",value:"pkcs12"},"PKCS12"))),n.a.createElement("br",null),n.a.createElement(kt.a,{id:"scKeyStorePath",label:"KeyStore Path",onChange:o,className:l.textField,value:r.scKeyStorePath,error:!Ye(r.scKeyStorePath),variant:"outlined",size:"small",placeholder:"/etc/certificates/domain-cert.jks"}),n.a.createElement("br",null),n.a.createElement(kt.a,{id:"scTrustStorePath",label:"TrustStore Path",onChange:o,className:l.textField,value:r.scTrustStorePath,error:!Ye(r.scTrustStorePath),variant:"outlined",size:"small",placeholder:"/etc/certificates/domain-cert.jks"}),n.a.createElement("br",null),n.a.createElement(kt.a,{id:"scKeyStorePassword",label:"KeyStore Password",onChange:o,className:l.textField,value:r.scKeyStorePassword,variant:"outlined",type:"password",size:"small"}),n.a.createElement("br",null),n.a.createElement(kt.a,{id:"scTrustStorePassword",label:"TrustStore Password",onChange:o,className:l.textField,value:r.scTrustStorePassword,variant:"outlined",type:"password",size:"small"}),n.a.createElement("br",null),n.a.createElement(re.a,{className:l.secondaryHeading},"TLS Support"),n.a.createElement(Rt.a,{style:{marginLeft:10},control:n.a.createElement(oe.a,{id:"scSSLv3",onChange:o,checked:r.scSSLv3,color:"primary",size:"small"}),label:"SSLv3"}),n.a.createElement("br",null),n.a.createElement(Rt.a,{style:{marginLeft:10},control:n.a.createElement(oe.a,{id:"scTLSv1",onChange:o,checked:r.scTLSv1,color:"primary",size:"small"}),label:"TLSv1"}),n.a.createElement("br",null),n.a.createElement(Rt.a,{style:{marginLeft:10},control:n.a.createElement(oe.a,{id:"scTLSv11",onChange:o,checked:r.scTLSv11,color:"primary",size:"small"}),label:"TLSv1.1"}),n.a.createElement("br",null),n.a.createElement(Rt.a,{style:{marginLeft:10},control:n.a.createElement(oe.a,{id:"scTLSv12",onChange:o,checked:r.scTLSv12,color:"primary",size:"small"}),label:"TLSv1.2"}),n.a.createElement("br",null),n.a.createElement(Rt.a,{control:n.a.createElement(oe.a,{id:"scDebugging",onChange:o,checked:r.scDebugging,color:"primary",size:"small"}),label:"Enable Debugging"}),n.a.createElement("br",null),n.a.createElement(re.a,{variant:"caption"},"Check if you want to enable debugging for secured",n.a.createElement("br",null),"connections. Not recommended.",n.a.createElement("br",null),n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://routr.io/docs/configuration/general/",className:l.link2},"Learn more")),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("div",null,n.a.createElement(xe.a,{disabled:!(Ye(r.scKeyStorePath)&&Ye(r.scTrustStorePath)),onClick:t,size:"small",variant:"contained",color:"secondary",disableElevation:!0},"Save"),n.a.createElement(xe.a,{onClick:a,style:{marginLeft:5},size:"small",variant:"contained",disableElevation:!0},"Cancel")))}));var It=Object(y.a)(Ot)((function(e){var t=e.onSave,a=e.onCancel,r=e.config,o=e.onChange,l=e.classes;return n.a.createElement("div",null,n.a.createElement(re.a,{className:l.secondaryHeading},"Denies or allows incoming traffic from the network list. ",n.a.createElement("br",null),'The "Deny Subnets" takes precedence over the ',n.a.createElement("br",null),' "Allow Subnets."'),n.a.createElement("br",null),n.a.createElement(kt.a,{id:"aclDeny",label:"Deny Subnets",multiline:!0,rowsMax:"4",rows:"3",value:r.aclDeny,onChange:o,error:!Ve(r.aclDeny),className:l.textField,variant:"outlined",size:"small",placeholder:"0.0.0.0/1"}),n.a.createElement("br",null),n.a.createElement(kt.a,{id:"aclAllow",label:"Allow Subnets",multiline:!0,rowsMax:"4",rows:"3",value:r.aclAllow,onChange:o,error:!Ve(r.aclAllow),className:l.textField,variant:"outlined",size:"small",placeholder:"192.168.1.12/32"}),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("div",null,n.a.createElement(xe.a,{disabled:!(Ve(r.aclDeny)&&Ve(r.aclAllow)),onClick:t,size:"small",variant:"contained",color:"secondary",disableElevation:!0},"Save"),n.a.createElement(xe.a,{onClick:a,style:{marginLeft:5},size:"small",variant:"contained",disableElevation:!0},"Cancel")))})),Mt=a(652);var Bt=Object(y.a)(Ot)((function(e){var t=e.onChangeSection,a=e.currentSection,r=e.classes;return n.a.createElement("div",{className:r.root},n.a.createElement(Mt.a,{"aria-label":"breadcrumb"},n.a.createElement(Pt.a,{color:"inherit",href:"/",onClick:function(e){return function(e,a){e.preventDefault(),t(a)}(e,"home")},className:r.bcLink},n.a.createElement(A.a,{className:r.icon}),"Settings"),"home"!==a&&n.a.createElement(re.a,{color:"textPrimary"},{home:"General",general:"General",networking_and_transport:"Networking and Transport",nat:"NAT",certificates:"Certificates",access_control_lists:"Access Control Lists",rest_service:"Rest Service",data_access:"Data Access"}[a])))})),Ft=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleSave=function(){var e=a.state.config,t=a.state;e.spec.dataSource||(e.spec.dataSource={}),e.spec.accessControlList||(e.spec.accessControlList={}),e.metadata||(e.metadata={}),e.metadata.userAgent=t.userAgent,e.spec.bindAddr=t.bindAddr,e.spec.externAddr=t.externAddr,e.spec.localnets=t.localnets.toString().split("\n"),e.spec.registrarIntf=t.registrarIntf,e.spec.recordRoute=t.recordRoute,e.spec.dataSource.provider=t.dsProvider,e.spec.dataSource.parameters=t.dsParameters,e.spec.accessControlList.deny=t.aclDeny.toString().split("\n"),e.spec.accessControlList.allow=t.aclAllow.toString().split("\n"),e.spec.restService.bindAddr=t.restBindAddr,e.spec.restService.port=t.restPort,e.spec.restService.minThreads=t.restMinThreads,e.spec.restService.maxThreads=t.restMaxThreads,e.spec.restService.timeOutMillis=t.restTimeOutMillis,e.spec.restService.keyStore=t.restKeyStorePath,e.spec.restService.trustStore=t.restTrustStorePath,e.spec.restService.keyStorePassword=t.restKeyStorePassword,e.spec.restService.trustStorePassword=t.restTrustStorePassword,e.spec.restService.unsecured=t.restUnsecured,e.spec.securityContext.keyStore=t.scKeyStorePath,e.spec.securityContext.trustStore=t.scTrustStorePath,e.spec.securityContext.keyStorePassword=t.scKeyStorePassword,e.spec.securityContext.trustStorePassword=t.scTrustStorePassword,e.spec.securityContext.debugging=t.scDebugging,e.spec.securityContext.client.authType=t.scClientAuthType,e.spec.securityContext.keyStoreType=t.scKeyStoreType;var r=[];t.scTLSv1&&r.push("TLSv1"),t.scTLSv11&&r.push("TLSv1.1"),t.scTLSv12&&r.push("TLSv1.2"),t.scSSLv3&&r.push("SSLv3"),e.spec.securityContext.client.protocols=r;var n=[],o=a.state.transportPorts;o.udp&&n.push({protocol:"udp",port:o.udp}),o.tcp&&n.push({protocol:"tcp",port:o.tcp}),o.tls&&n.push({protocol:"tls",port:o.tls}),o.ws&&n.push({protocol:"ws",port:o.ws}),o.wss&&n.push({protocol:"wss",port:o.wss}),e.spec.transport=n,a.props.apiStore.saveConfig(e),a.setState({currentSection:"home"})},a.handleOnCancel=function(){return a.setState({currentSection:"home",updated:!1})},a.isSection=function(e){return a.state.currentSection===e},a.handleChangeSection=function(e){return a.setState({currentSection:e,updated:!1})},a.handleChange=function(e){var t=e.currentTarget.id,r=e.target.value,n=a.state.transportPorts;"userAgent"===t&&a.setState({userAgent:r}),"bindAddr"===t&&a.setState({bindAddr:r}),"externAddr"===t&&a.setState({externAddr:r}),"localnets"===t&&a.setState({localnets:r}),"dsProvider"===t&&a.setState({dsProvider:r}),"dsParameters"===t&&a.setState({dsParameters:r}),"registrarIntf"===t&&a.setState({registrarIntf:r}),"aclDeny"===t&&a.setState({aclDeny:r}),"aclAllow"===t&&a.setState({aclAllow:r}),"recordRoute"===t&&a.setState({recordRoute:e.target.checked}),"udpPort"===t&&(n.udp=r,a.setState({transportPorts:n})),"tcpPort"===t&&(n.tcp=r,a.setState({transportPorts:n})),"tlsPort"===t&&(n.tls=r,a.setState({transportPorts:n})),"wsPort"===t&&(n.ws=r,a.setState({transportPorts:n})),"wssPort"===t&&(n.wss=r,a.setState({transportPorts:n})),"restBindAddr"===t&&a.setState({restBindAddr:r}),"restPort"===t&&a.setState({restPort:r}),"restMinThreads"===t&&a.setState({restMinThreads:r}),"restMaxThreads"===t&&a.setState({restMaxThreads:r}),"restTimeOutMillis"===t&&a.setState({restTimeOutMillis:r}),"restKeyStorePath"===t&&a.setState({restKeyStorePath:r}),"restTrustStorePath"===t&&a.setState({restTrustStorePath:r}),"restKeyStorePassword"===t&&a.setState({restKeyStorePassword:r}),"restTrustStorePassword"===t&&a.setState({restTrustStorePassword:r}),"restUnsecured"===t&&a.setState({restUnsecured:e.target.checked}),"scKeyStorePath"===t&&a.setState({scKeyStorePath:r}),"scTrustStorePath"===t&&a.setState({scTrustStorePath:r}),"scKeyStorePassword"===t&&a.setState({scKeyStorePassword:r}),"scTrustStorePassword"===t&&a.setState({scTrustStorePassword:r}),"scClientAuthType"===t&&a.setState({scClientAuthType:r}),"scKeyStoreType"===t&&a.setState({scKeyStoreType:r}),"scDebugging"===t&&a.setState({scDebugging:e.target.checked}),"scTLSv1"===t&&a.setState({scTLSv1:e.target.checked}),"scTLSv11"===t&&a.setState({scTLSv11:e.target.checked}),"scTLSv12"===t&&a.setState({scTLSv12:e.target.checked}),"scSSLv3"===t&&a.setState({scSSLv3:e.target.checked})},a.state={updated:!1,config:{},currentSection:"home",userAgent:"",bindAddr:"",externAddr:"",localnets:"",transportPorts:{udp:"",tcp:"",tls:"",ws:"",wss:""},registrarIntf:"Internal",recordRoute:!1,aclDeny:"",aclAllow:"",dsProvider:"files_data_provider",dsParameters:"",restBindAddr:"",restPort:"",restMinThreads:"",restMaxThreads:"",restTimeOutMillis:"",restKeyStorePath:"",restTrustStorePath:"",restKeyStorePassword:"",restTrustStorePassword:"",scKeyStorePath:"",scTrustStorePath:"",scKeyStorePassword:"",scTrustStorePassword:"",scKeyStoreType:"",scDebugging:!1,scClientAuthType:"DisabledAll",scSSLv3:!1,scTLSv1:!1,scTLSv11:!1,scTLSv12:!1,restUnsecured:!1},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(e){if(!0!==this.state.updated){var t=e.apiStore.getConfig(),a="",r="",n="",o="";t.spec.dataSource&&(a=t.spec.dataSource.provider,r=t.spec.dataSource.parameters),t.spec.accessControlList&&(n=t.spec.accessControlList.deny.join("\n"),o=t.spec.accessControlList.allow.join("\n"));var l={};t.spec.transport.forEach((function(e){l[e.protocol]=e.port}));var s=t.spec.securityContext.client.protocols.filter((function(e){return"TLSv1"===e})).length>0,c=t.spec.securityContext.client.protocols.filter((function(e){return"TLSv1.1"===e})).length>0,i=t.spec.securityContext.client.protocols.filter((function(e){return"TLSv1.2"===e})).length>0,u=t.spec.securityContext.client.protocols.filter((function(e){return"SSLv3"===e})).length>0;this.setState({userAgent:t.metadata.userAgent,bindAddr:t.spec.bindAddr,externAddr:t.spec.externAddr,localnets:t.spec.localnets,registrarIntf:t.spec.registrarIntf,recordRoute:t.spec.recordRoute,restBindAddr:t.spec.restService.bindAddr,restPort:t.spec.restService.port,restMinThreads:t.spec.restService.minThreads,restMaxThreads:t.spec.restService.maxThreads,restTimeOutMillis:t.spec.restService.timeOutMillis,restKeyStorePath:t.spec.restService.keyStore,restTrustStorePath:t.spec.restService.trustStore,restKeyStorePassword:t.spec.restService.keyStorePassword,restTrustStorePassword:t.spec.restService.trustStorePassword,restUnsecured:t.spec.restService.unsecured,scKeyStorePath:t.spec.securityContext.keyStore,scTrustStorePath:t.spec.securityContext.trustStore,scKeyStorePassword:t.spec.securityContext.keyStorePassword,scTrustStorePassword:t.spec.securityContext.trustStorePassword,scClientAuthType:t.spec.securityContext.client.authType,scKeyStoreType:t.spec.securityContext.keyStoreType,scDebugging:t.spec.securityContext.debugging,scTLSv1:s,scTLSv11:c,scTLSv12:i,scSSLv3:u,dsParameters:r,dsProvider:a,aclDeny:n,aclAllow:o,config:t,updated:!0,transportPorts:l})}}},{key:"render",value:function(e){return n.a.createElement("div",null,n.a.createElement(Bt,{onChangeSection:this.handleChangeSection,currentSection:this.state.currentSection}),this.isSection("general")&&n.a.createElement(Tt,{config:this.state,onChange:this.handleChange,onSave:this.handleSave,onCancel:this.handleOnCancel}),this.isSection("nat")&&n.a.createElement(Lt,{config:this.state,onChange:this.handleChange,onSave:this.handleSave,onCancel:this.handleOnCancel}),this.isSection("access_control_lists")&&n.a.createElement(It,{config:this.state,onChange:this.handleChange,onSave:this.handleSave,onCancel:this.handleOnCancel}),this.isSection("networking_and_transport")&&n.a.createElement(xt,{config:this.state,onChange:this.handleChange,onSave:this.handleSave,onCancel:this.handleOnCancel}),this.isSection("rest_service")&&n.a.createElement(zt,{config:this.state,onChange:this.handleChange,onSave:this.handleSave,onCancel:this.handleOnCancel}),this.isSection("certificates")&&n.a.createElement(Ut,{config:this.state,onChange:this.handleChange,onSave:this.handleSave,onCancel:this.handleOnCancel}),this.isSection("data_access")&&n.a.createElement(Dt,{config:this.state,onChange:this.handleChange,onSave:this.handleSave,onCancel:this.handleOnCancel}),"home"===this.state.currentSection&&n.a.createElement(wt,{onChangeSection:this.handleChangeSection}))}}]),t}(n.a.Component),Kt=Object(s.b)("apiStore")(Object(s.b)("appStore")(Object(s.c)(Ft))),_t=a(653),Wt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(n)))).handleClose=function(){return a.props.appStore.setNotificationOpen()},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(_t.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.props.appStore.isNotificationOpen(),autoHideDuration:15e3,onClose:this.handleClose,ContentProps:{"aria-describedby":"message-id"},message:n.a.createElement("span",{id:"message-id"},this.props.appStore.notificationMsg),action:[n.a.createElement(b.a,{key:"close","aria-label":"Close",color:"inherit",onClick:this.handleClose},n.a.createElement(ye.a,null))]}))}}]),t}(n.a.Component),Ht=Object(s.b)("appStore")(Object(s.c)(Wt)),Jt=a(125),qt=a.n(Jt),Gt=function(e){function t(){var e,a;Object(c.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(n)))).createSortHandler=function(e){return function(t){a.props.onRequestSort(t,e)}},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.order,r=t.orderBy,o=t.columnData;return n.a.createElement(Z.a,null,n.a.createElement(te.a,null,o.map((function(t){return n.a.createElement(Q.a,{key:t.id,sortDirection:r===t.id&&a},n.a.createElement(le.a,{title:"Sort",placement:t.numeric?"bottom-end":"bottom-start",enterDelay:300},n.a.createElement(ae.a,{active:r===t.id,direction:a,onClick:e.createSortHandler(t.id)},t.label)))}),this)))}}]),t}(n.a.Component),Yt=function(e){var t=e.classes,a=e.name,r=e.handleRefresh;return n.a.createElement(g.a,null,n.a.createElement("div",{className:t.title},n.a.createElement(re.a,{variant:"h6",id:"tableTitle"},_e(a))),n.a.createElement("div",{className:t.spacer}),n.a.createElement("div",{className:t.actions},n.a.createElement(le.a,{title:"Refresh"},n.a.createElement(b.a,{"aria-label":"Refresh",onClick:r},n.a.createElement(qt.a,null)))))};Yt=Object(y.a)((function(e){return{root:{paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(de.lighten)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},spacer:{flex:"1 1 100%"},actions:{color:e.palette.text.secondary},title:{flex:"0 0 auto"}}}))(Yt);var $t=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleRequestSort=function(e,t){var r=t,n="desc";a.state.orderBy===t&&"desc"===a.state.order&&(n="asc");var o="desc"===n?a.state.data.sort((function(e,t){return t[r]<e[r]?-1:1})):a.state.data.sort((function(e,t){return e[r]<t[r]?-1:1}));a.setState({data:o,order:n,orderBy:r})},a.handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:e.target.value})},a.state={order:"asc",orderBy:"calories",data:e.data,page:0,rowsPerPage:5},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,r=t.columnData,o=t.data,l=t.name,s=t.apiStore,c=this.state,i=c.order,u=c.orderBy,d=c.rowsPerPage,m=c.page,p=d-Math.min(d,o.length-m*d);return n.a.createElement(ne.a,{className:a.root},n.a.createElement(Yt,{name:l,handleRefresh:function(t){return s.loadResources(e.props.appStore.getCurrentSection())}}),n.a.createElement("div",{className:a.tableWrapper},n.a.createElement(V.a,{className:a.table,"aria-labelledby":"tableTitle"},n.a.createElement(Gt,{columnData:r,order:i,orderBy:u,onRequestSort:this.handleRequestSort}),n.a.createElement(X.a,null,o.slice(m*d,m*d+d).map((function(e){return n.a.createElement(te.a,{hover:!0,tabIndex:-1,key:e.c1},n.a.createElement(Q.a,{component:"th",scope:"row"},e.c1),n.a.createElement(Q.a,null,e.c2),e.c3&&n.a.createElement(Q.a,null,e.c3),e.c4&&n.a.createElement(Q.a,null,e.c4))})),p>0&&n.a.createElement(te.a,{style:{height:49*p}},n.a.createElement(Q.a,{colSpan:6}))))),n.a.createElement(ee.a,{component:"div",count:o.length,rowsPerPage:d,page:m,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}))}}]),t}(n.a.Component),Vt=Object(s.b)("apiStore")(Object(s.b)("appStore")(Object(y.a)((function(e){return{root:{width:"100%",marginTop:e.spacing(1)},table:{minWidth:1020},tableWrapper:{overflowX:"auto"}}}))(Object(s.c)($t)))),Xt=Object(y.a)((function(e){return{root:{borderBottom:"1px solid ".concat(e.palette.divider),margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var t=e.children,a=e.classes,r=e.onClose;return n.a.createElement(je.a,{disableTypography:!0,className:a.root},n.a.createElement(re.a,{variant:"h6"},t),r?n.a.createElement(b.a,{"aria-label":"Close",className:a.closeButton,onClick:r},n.a.createElement(ye.a,null)):null)})),Qt=Object(y.a)((function(e){return{root:{margin:0,padding:0}}}))(Ne.a),Zt=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(ve.a,{"aria-labelledby":"customized-dialog-title",onClose:this.props.appStore.setAboutDialogOpen,open:this.props.appStore.isAboutDialogOpen()},n.a.createElement(Xt,{id:"customized-dialog-title",onClose:this.props.appStore.setAboutDialogOpen},"About"),n.a.createElement(Qt,null,n.a.createElement(lt.a,null,n.a.createElement(re.a,{color:"textSecondary"},"v1.0"),n.a.createElement(re.a,{component:"p"},'Routr is a lightweight sip proxy, location server, and registrar that provides a reliable and scalable SIP infrastructure for telephony carriers, communication service providers, and integrators. This is the version "1.0" of Routr console. ',n.a.createElement("br",null),'"Next-generation SIP Server"')))))}}]),t}(n.a.Component),ea=Object(s.b)("apiStore")(Object(s.b)("appStore")(Object(y.a)({appBar:{position:"relative"},flex:{flex:1}})(Object(s.c)(Zt)))),ta=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.appStore,r=e.apiStore,o=St(a.getCurrentSection()),l=r.getResources();return n.a.createElement("div",{className:t.root},n.a.createElement(h.a,{position:"absolute",className:t.appBar},n.a.createElement(P,null)),n.a.createElement(p.a,{variant:"permanent",classes:{paper:t.drawerPaper}},n.a.createElement("div",{className:t.toolbar}),n.a.createElement(G,null)),n.a.createElement("main",{className:t.content,style:{backgroundColor:"settings"===a.getCurrentSection()?"#fff":""}},n.a.createElement("div",{className:t.toolbar}),a.isResourceSection()&&n.a.createElement(Ct,null),a.isLocOrRegSection()&&n.a.createElement(Vt,{name:_e(a.getCurrentSection()),columnData:o,data:l}),a.isSettingsSection()&&n.a.createElement(Kt,null),n.a.createElement(Ht,null),n.a.createElement(ea,null)))}}]),t}(n.a.Component),aa=Object(s.b)("apiStore")(Object(s.b)("appStore")(Object(y.a)((function(e){return{root:{flexGrow:1,zIndex:1,overflow:"hidden",position:"relative",display:"flex",height:"100vh"},appBar:{zIndex:e.zIndex.drawer+1},drawerPaper:{position:"relative",width:240},content:{overflow:"scroll",flexGrow:1,backgroundColor:e.palette.background.default,padding:e.spacing(3),minWidth:0},toolbar:e.mixins.toolbar}}))(Object(s.c)(ta)))),ra=a(126),na=a(648),oa=Object(ra.a)({typography:{useNextVariants:!0},palette:{primary:{light:"#757ce8",main:"#33383d",dark:"#002884",contrastText:"#fff"},secondary:{main:"#3F51B5"}}}),la=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){We("token")&&this.props.apiStore.setToken(We("token")),We("apiURL")&&this.props.apiStore.setApiURL(We("apiURL"))}},{key:"render",value:function(){return n.a.createElement("div",{className:"App"},n.a.createElement(na.a,{theme:oa},n.a.createElement(aa,null)))}}]),t}(r.Component),sa=Object(s.b)("apiStore")(Object(s.c)(la)),ca=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ia(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var ua=a(10),da=function e(){var t=this;Object(c.a)(this,e),this.currentResource={},this.resourceEditorOpen=!1,this.aboutDialogOpen=!1,this.fileUploaderOpen=!1,this.notificationOpen=!1,this.notificationMsg="",this.currentSection="domains",this.notify=function(e,a){t.notificationMsg=e,t.setNotificationOpen()},this.setNotificationOpen=function(){return t.notificationOpen=!t.notificationOpen},this.setCurrentResource=function(e){return t.currentResource=e},this.setResourceEditorOpen=function(){return t.resourceEditorOpen=!t.resourceEditorOpen},this.setAboutDialogOpen=function(){return t.aboutDialogOpen=!t.aboutDialogOpen},this.setFileUploaderOpen=function(){return t.fileUploaderOpen=!t.fileUploaderOpen},this.setCurrentSection=function(e){return t.currentSection=e},this.getCurrentSection=function(){return t.currentSection},this.getCurrentResource=function(){return t.currentResource},this.isResourceSection=function(){return"domains"===t.currentSection||"agents"===t.currentSection||"peers"===t.currentSection||"gateways"===t.currentSection||"numbers"===t.currentSection},this.isLocOrRegSection=function(){return"location"===t.currentSection||"registration"===t.currentSection},this.isSettingsSection=function(){return"settings"===t.currentSection},this.isAboutDialogOpen=function(){return t.aboutDialogOpen},this.isResourceEditorOpen=function(){return t.resourceEditorOpen},this.isFileUploaderOpen=function(){return t.fileUploaderOpen},this.isNotificationOpen=function(){return t.notificationOpen}};Object(ua.g)(da,{currentResource:ua.l,currentSection:ua.l,resourceEditorOpen:ua.l,aboutDialogOpen:ua.l,fileUploaderOpen:ua.l,notificationMsg:ua.l,notificationOpen:ua.l});var ma=new da,pa=a(32),ha=a.n(pa),ga=function e(){var t=this;Object(c.a)(this,e),this.resources=[],this.apiURL="/api/v1beta1",this.config={spec:{restService:{},securityContext:{}}},this.token="",this.update=function(e){if(t.doesNotSupportWOOps())ma.notify("Operation not supported by data source provider.");else{var a;try{a=JSON.parse(e)}catch(o){return void ma.notify("Malformed document.")}var r=ma.getCurrentSection(),n=He(t.apiURL,r+"/"+a.metadata.ref,"",t.token);fetch(n,{method:"PUT",body:e}).then((function(e){return e.json()})).then((function(e){200===e.status?ma.notify("Updated resource."):422===e.status&&e.data?ma.notify(e.message+": "+e.data):ma.notify(e.message),t.loadResources(ma.getCurrentSection())}))}},this.delete=function(e,a){var r,n,o,l,s;return ha.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(!t.doesNotSupportWOOps()){c.next=3;break}return ma.notify("Operation not supported by data source provider."),c.abrupt("return");case 3:r=function(a){return He(t.apiURL,e+"/"+a,"",t.token)},n=[],o=0;case 6:if(!(o<a.length)){c.next=22;break}return c.next=9,ha.a.awrap(fetch(r(a[o]),{method:"DELETE"}));case 9:return l=c.sent,c.next=12,ha.a.awrap(l.json());case 12:if(405!==(s=c.sent).status&&409!==s.status){c.next=18;break}return ma.notify(s.message),c.abrupt("return");case 18:200!==s.status&&n.push(s.message);case 19:o++,c.next=6;break;case 22:t.loadResources(ma.getCurrentSection()),n.length>0?ma.notify("An error occurred while deleting the resources."):ma.notify("".concat(a.length," ").concat(ma.getCurrentSection()," removed."));case 24:case"end":return c.stop()}}))},this.loadResources=function(e){var a,r,n,o,l;return ha.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return a="registration"===e?"registry":e,r=He(t.apiURL,a,"*",t.token),s.next=4,ha.a.awrap(fetch(r));case 4:return n=s.sent,s.next=7,ha.a.awrap(n.json());case 7:200===(o=s.sent).status?(l=[],o&&o.data&&o.data.forEach((function(t){l.push(vt(t,e))})),t.resources=l):ma.notify(o.message);case 9:case"end":return s.stop()}}))},this.getResources=function(){return t.resources},this.getAPIUrl=function(){return t.apiURL},this.setApiURL=function(e){return t.apiURL=e},this.getToken=function(){return t.token},this.setToken=function(e){return t.token=e},this.saveConfig=function(e){if(t.doesNotSupportWOOps())ma.notify("Operation not supported by data source provider.");else{var a=He(t.apiURL,"system/config","",t.token);fetch(a,{method:"PUT",body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){200===e.status?ma.notify("Updated settings."):ma.notify(e.message)}))}},this.loadConfig=function(){var e,a,r;return ha.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return"system/config",e=He(t.apiURL,"system/config","*",t.token),n.next=4,ha.a.awrap(fetch(e));case 4:return a=n.sent,n.next=7,ha.a.awrap(a.json());case 7:200===(r=n.sent).status?t.config=r.data:ma.notify(r.message);case 9:case"end":return n.stop()}}))},this.getConfig=function(){return t.config},this.doesNotSupportWOOps=function(){return"files_data_provider"===t.config.spec.dataSource.provider},Object(ua.q)((function(){return""!==t.token||!0}),(function(){return ha.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loadConfig(),e.next=3,ha.a.awrap(setTimeout((function(){}),1500));case 3:"settings"!==ma.getCurrentSection()&&t.loadResources(ma.getCurrentSection());case 4:case"end":return e.stop()}}))}))};Object(ua.g)(ga,{resources:ua.l,token:ua.l,config:ua.l});var ba=new ga,fa={appStore:ma,apiStore:ba};l.a.render(n.a.createElement(s.a,fa,n.a.createElement(sa,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");ca?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ia(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):ia(e)}))}}()}},[[147,1,2]]]);
//# sourceMappingURL=main.9cecf7a3.chunk.js.map